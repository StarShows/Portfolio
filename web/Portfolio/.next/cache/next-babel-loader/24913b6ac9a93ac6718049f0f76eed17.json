{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _set = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/set\"));\n\nvar _mitt = _interopRequireDefault(require(\"next-server/dist/lib/mitt\"));\n\nvar _unfetch = _interopRequireDefault(require(\"unfetch\"));\n/* global document */\n// smaller version of https://gist.github.com/igrigorik/a02f2359f3bc50ca7a9c\n\n\nfunction supportsPreload(list) {\n  if (!list || !list.supports) {\n    return false;\n  }\n\n  try {\n    return list.supports('preload');\n  } catch (e) {\n    return false;\n  }\n}\n\nconst hasPreload = supportsPreload(document.createElement('link').relList);\n\nclass PageLoader {\n  constructor(buildId, assetPrefix) {\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.prefetchCache = new _set.default();\n    this.pageRegisterEvents = (0, _mitt.default)();\n    this.loadingRoutes = {};\n    this.promisedBuildId = _promise.default.resolve();\n  }\n\n  normalizeRoute(route) {\n    if (route[0] !== '/') {\n      throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\" + route + \"\\\"\");\n    }\n\n    route = route.replace(/\\/index$/, '/');\n    if (route === '/') return route;\n    return route.replace(/\\/$/, '');\n  }\n\n  loadPage(route) {\n    route = this.normalizeRoute(route);\n    return new _promise.default((resolve, reject) => {\n      const fire = _ref => {\n        let {\n          error,\n          page\n        } = _ref;\n        this.pageRegisterEvents.off(route, fire);\n        delete this.loadingRoutes[route];\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve(page);\n        }\n      }; // If there's a cached version of the page, let's use it.\n\n\n      const cachedPage = this.pageCache[route];\n\n      if (cachedPage) {\n        const {\n          error,\n          page\n        } = cachedPage;\n        error ? reject(error) : resolve(page);\n        return;\n      } // Register a listener to get the page\n\n\n      this.pageRegisterEvents.on(route, fire); // If the page is loading via SSR, we need to wait for it\n      // rather downloading it again.\n\n      if (document.getElementById(\"__NEXT_PAGE__\" + route)) {\n        return;\n      } // Load the script if not asked to load yet.\n\n\n      if (!this.loadingRoutes[route]) {\n        this.loadScript(route);\n        this.loadingRoutes[route] = true;\n      }\n    });\n  }\n\n  onDynamicBuildId() {\n    this.promisedBuildId = new _promise.default(resolve => {\n      (0, _unfetch.default)(this.assetPrefix + \"/_next/static/HEAD_BUILD_ID\").then(res => {\n        if (res.ok) {\n          return res;\n        }\n\n        const err = new Error('Failed to fetch HEAD buildId');\n        err.res = res;\n        throw err;\n      }).then(res => res.text()).then(buildId => {\n        this.buildId = buildId.trim();\n      }).catch(() => {\n        // When this fails it's not a _huge_ deal, preload wont work and page\n        // navigation will 404, triggering a SSR refresh\n        console.warn('Failed to load BUILD_ID from server. ' + 'The following client-side page transition will likely 404 and cause a SSR.\\n' + 'http://err.sh/zeit/next.js/head-build-id');\n      }).then(resolve, resolve);\n    });\n  }\n\n  loadScript(route) {\n    var _this = this;\n\n    return (0, _asyncToGenerator2.default)(function* () {\n      yield _this.promisedBuildId;\n      route = _this.normalizeRoute(route);\n      let scriptRoute = route === '/' ? '/index.js' : route + \".js\";\n      const script = document.createElement('script');\n\n      if (process.env.__NEXT_MODERN_BUILD && 'noModule' in script) {\n        script.type = 'module';\n        scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n      }\n\n      const url = _this.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this.buildId) + \"/pages\" + scriptRoute;\n      script.crossOrigin = process.crossOrigin;\n      script.src = url;\n\n      script.onerror = () => {\n        const error = new Error(\"Error loading script \" + url);\n        error.code = 'PAGE_LOAD_ERROR';\n\n        _this.pageRegisterEvents.emit(route, {\n          error\n        });\n      };\n\n      document.body.appendChild(script);\n    })();\n  } // This method if called by the route code.\n\n\n  registerPage(route, regFn) {\n    const register = () => {\n      try {\n        const {\n          error,\n          page\n        } = regFn();\n        this.pageCache[route] = {\n          error,\n          page\n        };\n        this.pageRegisterEvents.emit(route, {\n          error,\n          page\n        });\n      } catch (error) {\n        this.pageCache[route] = {\n          error\n        };\n        this.pageRegisterEvents.emit(route, {\n          error\n        });\n      }\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Wait for webpack to become idle if it's not.\n      // More info: https://github.com/zeit/next.js/pull/1511\n      if (module.hot && module.hot.status() !== 'idle') {\n        console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\" + route + \"\\\"\");\n\n        const check = status => {\n          if (status === 'idle') {\n            module.hot.removeStatusHandler(check);\n            register();\n          }\n        };\n\n        module.hot.status(check);\n        return;\n      }\n    }\n\n    register();\n  }\n\n  prefetch(route) {\n    var _this2 = this;\n\n    return (0, _asyncToGenerator2.default)(function* () {\n      route = _this2.normalizeRoute(route);\n      let scriptRoute = (route === '/' ? '/index' : route) + \".js\";\n\n      if (process.env.__NEXT_MODERN_BUILD && 'noModule' in document.createElement('script')) {\n        scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n      }\n\n      if (_this2.prefetchCache.has(scriptRoute) || document.getElementById(\"__NEXT_PAGE__\" + route)) {\n        return;\n      }\n\n      _this2.prefetchCache.add(scriptRoute); // Inspired by quicklink, license: https://github.com/GoogleChromeLabs/quicklink/blob/master/LICENSE\n      // Don't prefetch if the user is on 2G / Don't prefetch if Save-Data is enabled\n\n\n      if ('connection' in navigator) {\n        if ((navigator.connection.effectiveType || '').indexOf('2g') !== -1 || navigator.connection.saveData) {\n          return;\n        }\n      } // Feature detection is used to see if preload is supported\n      // If not fall back to loading script tags before the page is loaded\n      // https://caniuse.com/#feat=link-rel-preload\n\n\n      if (hasPreload) {\n        yield _this2.promisedBuildId;\n        const link = document.createElement('link');\n        link.rel = 'preload';\n        link.crossOrigin = process.crossOrigin;\n        link.href = _this2.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this2.buildId) + \"/pages\" + scriptRoute;\n        link.as = 'script';\n        document.head.appendChild(link);\n        return;\n      }\n\n      if (document.readyState === 'complete') {\n        return _this2.loadPage(route).catch(() => {});\n      } else {\n        return new _promise.default(resolve => {\n          window.addEventListener('load', () => {\n            _this2.loadPage(route).then(() => resolve(), () => resolve());\n          });\n        });\n      }\n    })();\n  }\n\n  clearCache(route) {\n    route = this.normalizeRoute(route);\n    delete this.pageCache[route];\n    delete this.loadingRoutes[route];\n    const script = document.getElementById(\"__NEXT_PAGE__\" + route);\n\n    if (script) {\n      script.parentNode.removeChild(script);\n    }\n  }\n\n}\n\nexports.default = PageLoader;","map":{"version":3,"sources":["/Users/starshows/Desktop/portfolio/web/Portfolio/node_modules/next/dist/client/page-loader.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_asyncToGenerator2","_promise","_set","_mitt","_unfetch","supportsPreload","list","supports","e","hasPreload","document","createElement","relList","PageLoader","constructor","buildId","assetPrefix","pageCache","prefetchCache","pageRegisterEvents","loadingRoutes","promisedBuildId","resolve","normalizeRoute","route","Error","replace","loadPage","reject","fire","_ref","error","page","off","cachedPage","on","getElementById","loadScript","onDynamicBuildId","then","res","ok","err","text","trim","catch","console","warn","_this","scriptRoute","script","process","env","__NEXT_MODERN_BUILD","type","url","encodeURIComponent","crossOrigin","src","onerror","code","emit","body","appendChild","registerPage","regFn","register","NODE_ENV","module","hot","status","log","check","removeStatusHandler","prefetch","_this2","has","add","navigator","connection","effectiveType","indexOf","saveData","link","rel","href","as","head","readyState","window","addEventListener","clearCache","parentNode","removeChild"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var _set=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/set\"));var _mitt=_interopRequireDefault(require(\"next-server/dist/lib/mitt\"));var _unfetch=_interopRequireDefault(require(\"unfetch\"));/* global document */ // smaller version of https://gist.github.com/igrigorik/a02f2359f3bc50ca7a9c\nfunction supportsPreload(list){if(!list||!list.supports){return false;}try{return list.supports('preload');}catch(e){return false;}}const hasPreload=supportsPreload(document.createElement('link').relList);class PageLoader{constructor(buildId,assetPrefix){this.buildId=buildId;this.assetPrefix=assetPrefix;this.pageCache={};this.prefetchCache=new _set.default();this.pageRegisterEvents=(0,_mitt.default)();this.loadingRoutes={};this.promisedBuildId=_promise.default.resolve();}normalizeRoute(route){if(route[0]!=='/'){throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\"+route+\"\\\"\");}route=route.replace(/\\/index$/,'/');if(route==='/')return route;return route.replace(/\\/$/,'');}loadPage(route){route=this.normalizeRoute(route);return new _promise.default((resolve,reject)=>{const fire=(_ref)=>{let{error,page}=_ref;this.pageRegisterEvents.off(route,fire);delete this.loadingRoutes[route];if(error){reject(error);}else{resolve(page);}};// If there's a cached version of the page, let's use it.\nconst cachedPage=this.pageCache[route];if(cachedPage){const{error,page}=cachedPage;error?reject(error):resolve(page);return;}// Register a listener to get the page\nthis.pageRegisterEvents.on(route,fire);// If the page is loading via SSR, we need to wait for it\n// rather downloading it again.\nif(document.getElementById(\"__NEXT_PAGE__\"+route)){return;}// Load the script if not asked to load yet.\nif(!this.loadingRoutes[route]){this.loadScript(route);this.loadingRoutes[route]=true;}});}onDynamicBuildId(){this.promisedBuildId=new _promise.default(resolve=>{(0,_unfetch.default)(this.assetPrefix+\"/_next/static/HEAD_BUILD_ID\").then(res=>{if(res.ok){return res;}const err=new Error('Failed to fetch HEAD buildId');err.res=res;throw err;}).then(res=>res.text()).then(buildId=>{this.buildId=buildId.trim();}).catch(()=>{// When this fails it's not a _huge_ deal, preload wont work and page\n// navigation will 404, triggering a SSR refresh\nconsole.warn('Failed to load BUILD_ID from server. '+'The following client-side page transition will likely 404 and cause a SSR.\\n'+'http://err.sh/zeit/next.js/head-build-id');}).then(resolve,resolve);});}loadScript(route){var _this=this;return(0,_asyncToGenerator2.default)(function*(){yield _this.promisedBuildId;route=_this.normalizeRoute(route);let scriptRoute=route==='/'?'/index.js':route+\".js\";const script=document.createElement('script');if(process.env.__NEXT_MODERN_BUILD&&'noModule'in script){script.type='module';scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}const url=_this.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this.buildId)+\"/pages\"+scriptRoute;script.crossOrigin=process.crossOrigin;script.src=url;script.onerror=()=>{const error=new Error(\"Error loading script \"+url);error.code='PAGE_LOAD_ERROR';_this.pageRegisterEvents.emit(route,{error});};document.body.appendChild(script);})();}// This method if called by the route code.\nregisterPage(route,regFn){const register=()=>{try{const{error,page}=regFn();this.pageCache[route]={error,page};this.pageRegisterEvents.emit(route,{error,page});}catch(error){this.pageCache[route]={error};this.pageRegisterEvents.emit(route,{error});}};if(process.env.NODE_ENV!=='production'){// Wait for webpack to become idle if it's not.\n// More info: https://github.com/zeit/next.js/pull/1511\nif(module.hot&&module.hot.status()!=='idle'){console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\"+route+\"\\\"\");const check=status=>{if(status==='idle'){module.hot.removeStatusHandler(check);register();}};module.hot.status(check);return;}}register();}prefetch(route){var _this2=this;return(0,_asyncToGenerator2.default)(function*(){route=_this2.normalizeRoute(route);let scriptRoute=(route==='/'?'/index':route)+\".js\";if(process.env.__NEXT_MODERN_BUILD&&'noModule'in document.createElement('script')){scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}if(_this2.prefetchCache.has(scriptRoute)||document.getElementById(\"__NEXT_PAGE__\"+route)){return;}_this2.prefetchCache.add(scriptRoute);// Inspired by quicklink, license: https://github.com/GoogleChromeLabs/quicklink/blob/master/LICENSE\n// Don't prefetch if the user is on 2G / Don't prefetch if Save-Data is enabled\nif('connection'in navigator){if((navigator.connection.effectiveType||'').indexOf('2g')!==-1||navigator.connection.saveData){return;}}// Feature detection is used to see if preload is supported\n// If not fall back to loading script tags before the page is loaded\n// https://caniuse.com/#feat=link-rel-preload\nif(hasPreload){yield _this2.promisedBuildId;const link=document.createElement('link');link.rel='preload';link.crossOrigin=process.crossOrigin;link.href=_this2.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this2.buildId)+\"/pages\"+scriptRoute;link.as='script';document.head.appendChild(link);return;}if(document.readyState==='complete'){return _this2.loadPage(route).catch(()=>{});}else{return new _promise.default(resolve=>{window.addEventListener('load',()=>{_this2.loadPage(route).then(()=>resolve(),()=>resolve());});});}})();}clearCache(route){route=this.normalizeRoute(route);delete this.pageCache[route];delete this.loadingRoutes[route];const script=document.getElementById(\"__NEXT_PAGE__\"+route);if(script){script.parentNode.removeChild(script);}}}exports.default=PageLoader;"]},"metadata":{},"sourceType":"script"}